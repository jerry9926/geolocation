<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>geolocation-demo</title>
</head>
<body onload="loadDemo()">
	<h1 id="support"></h1>

	<h2 id="latitude"></h2>
	<h2 id="longitude"></h2>
	<h2 id="accuracy"></h2>
	<h2 id="timestamp"></h2>

<script>
	function loadDemo(){
		if (navigator.geolocation) {
			document.getElementById('support').innerHTML = 'Geolocation supported.';
			//  一次更新
			navigator.geolocation.getCurrentPosition(updateLocation, handleLocationError);
		} else {
			document.getElementById('support').innerHTML = 'Geolocation is not supported.';
		}
	}

	function updateLocation(position){
		var latitude = position.coords.latitude,
		longitude = position.coords.longitude,
		accuracy = position.coords.accuracy,
		timestamp = position.timestamp;

		document.getElementById('latitude').innerHTML = 'latitude: ' + latitude;
		document.getElementById('longitude').innerHTML = 'longitude: ' + longitude;
		document.getElementById('accuracy').innerHTML = 'accuracy: ' + accuracy;
		document.getElementById('timestamp').innerHTML = 'timestamp: ' + timestamp;
	}

	function handleLocationError(error){
		updateStatus(error.message);

		/*switch(error.code){
			case 0:
				updateStatus("获取地理位置时出现未知错误");
			break;
			case 1:
				updateStatus("用户拒绝浏览器获取地理位置信息");
			break;
			case 2:
				updateStatus("无法获取地理位置信息");
			break;
			case 3:
				updateStatus("请求超时");
			break;
		}*/
	}

	function updateStatus(message){
		document.getElementById('support').innerHTML = message;
	}


</script>
</body>
</html>